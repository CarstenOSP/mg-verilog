This module identifies which bit in the input bus is set first according to a selectable priority scheme (either least-significant-bit-first or most-significant-bit-first). It automatically expands the input to the nearest power of two, then uses multiple hierarchical stages to detect a valid bit and determine its index. Finally, it exposes three key outputs: a valid signal indicating whether any bit was set, the encoded index of that bit, and a one-hot output that marks exactly which bit in the original input was selected.